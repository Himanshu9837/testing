(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8180],{90813:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return t(85655)}])},85655:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ue},getInitialProps:function(){return de}});var s=t(34051),a=t.n(s),r=t(85893),i=t(67294),c=t(21157),o=t(27246),l=t(25675),u=t.n(l),d=t(41664),m=t.n(d),h=t(82019),x=t(11163),f=t(42761),p=t(45697),v=t.n(p),g=t(77314),j=t(2734),y=t(42293),N=t(88409),b=t(40044),k=t(23972),S=t(87357),w=t(22903);function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function O(e,n,t,s,a,r,i){try{var c=e[r](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(s,a)}function E(e){return function(){var n=this,t=arguments;return new Promise((function(s,a){var r=e.apply(n,t);function i(e){O(r,s,a,i,c,"next",e)}function c(e){O(r,s,a,i,c,"throw",e)}i(void 0)}))}}function C(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){C(e,n,t[n])}))}return e}function D(e,n){if(null==e)return{};var t,s,a=function(e,n){if(null==e)return{};var t,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,a,r=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(r.push(s.value),!n||r.length!==n);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return r}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){var n=e.children,t=e.value,s=e.index,a=D(e,["children","value","index"]);return(0,r.jsx)("div",Z({role:"tabpanel",hidden:t!==s,id:"full-width-tabpanel-".concat(s),"aria-labelledby":"full-width-tab-".concat(s)},a,{children:t===s&&(0,r.jsx)(S.Z,{sx:{p:3},children:(0,r.jsx)(k.Z,{children:n})})}))}function P(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}A.propTypes={children:v().node,index:v().number.isRequired,value:v().number.isRequired};var T=function(e){var n=e.changeChat,t=e.socket,s="http://178.62.228.242:5000/",l=(0,i.useContext)(w.Z),d=l.chatback,p=l.setchatback,v=(0,x.useRouter)(),k=(0,i.useState)([]),S=k[0],_=k[1],O=(0,i.useState)(""),C=(O[0],O[1]),D=(0,i.useState)(""),T=D[0],F=D[1],B=(0,i.useState)(""),J=(B[0],B[1],(0,i.useState)(void 0)),V=J[0],$=J[1],U=(0,i.useState)([]),R=U[0],G=U[1],K=(0,i.useState)(!1),M=(K[0],K[1]),q=(0,i.useState)([]),L=q[0],z=q[1],H=(0,i.useState)(""),W=H[0],X=H[1],Y=(0,i.useState)(""),Q=Y[0],ee=Y[1],ne=(0,i.useState)(""),te=(ne[0],ne[1],(0,i.useState)([])),se=te[0],ae=te[1],re=(0,i.useState)([]),ie=re[0],ce=re[1],oe=(0,i.useState)(!1),le=oe[0],ue=oe[1],de=(0,j.Z)(),me=I(i.useState(0),2),he=me[0],xe=me[1],fe=(0,i.useState)([]),pe=fe[0],ve=fe[1],ge=s;(0,i.useEffect)((function(){var e=localStorage.getItem("user");if(e){var n=(null!==e?JSON.parse(e):[]).tokenData.id;t.current=(0,c.ZP)(ge),t.current.emit("add-user",n),t.current.on("online",(function(e){console.log(e,"Is Online!"),M(!0)})),t.current.on("offline",(function(e){console.log(e,"Is ofline!"),M(!1)}))}else v.push("/chat/login")}),[]),(0,i.useEffect)((function(){if(null!=localStorage.getItem("user")){var e=localStorage.getItem("user"),n=null!==e?JSON.parse(e):[],t=n.tokenData.username,a=n.tokenData.id;C(t),F(a),fetch("".concat(s,"api/chat/fetchmychat/").concat(a)).then((function(e){return e.json()})).then((function(e){_(e.userdetails),console.log(e.unseenmsg),z(e.unseenmsg)}))}console.log(L.length)}),[]),(0,i.useEffect)((function(){var e=localStorage.getItem("UserId");console.log(e);var a=localStorage.getItem("user");if(console.log(a),a){var r=(null!==a?JSON.parse(a):[]).tokenData.id;e===r?localStorage.removeItem("UserId"):e&&(fetch("".concat(s,"api/edituser/").concat(e)).then((function(e){return e.json()})).then((function(s){var i,o;i=e,o=s.result,t.current=(0,c.ZP)(ge),t.current.emit("add-user",r),console.log(a),t.current.emit("join chat",i),console.log(i),n(o)})),localStorage.removeItem("UserId"))}}),[]);var je=function(){var e=E(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("user"))){e.next=12;break}return t=null!==n?JSON.parse(n):[],r=t.tokenData.id,e.next=6,fetch(s+"api/edituser/"+r);case 6:return i=e.sent,e.next=9,i.json();case 9:i=e.sent,console.log(i),ue(i.result.isadmin);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=E(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+"api/chat/allchatuser");case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,console.log(n),G(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=E(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+"api/chat/searchchatuser/"+W);case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,console.log(n),G(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=E(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+"api/chat/searchchatuser/"+Q);case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,console.log(n[0]._id),_(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=E(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+"api/chat/searchchatuser/"+Q);case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,console.log(n[0]._id),ve(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=E(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+"api/chat/fetchsearchchat/"+n);case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,console.log(t),ae(t);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){console.log(ie),je(),ye(),Se(ie)}),[]);var we=function(e,a){p(!1),$(e),t.current=(0,c.ZP)(ge),t.current.emit("add-user",T),console.log(T),t.current.emit("join chat",a._id),console.log(a._id),console.log(a),n(a);var r={sender:a._id};fetch("".concat(s,"api/chat/updatechatnotification/").concat(T),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"leftchat ".concat(d?"active":""),children:[(0,r.jsxs)("div",{className:"leftchatinner",children:[(0,r.jsx)("div",{className:"leftlogo",children:(0,r.jsx)(m(),{href:"/",children:(0,r.jsx)(u(),{src:o.Z})})}),(0,r.jsxs)("div",{className:"chat_tab_style",children:[(0,r.jsx)(y.Z,{position:"static",children:(0,r.jsxs)(N.Z,{value:he,onChange:function(e,n){xe(n)},indicatorColor:"secondary",textColor:"inherit",variant:"scrollable",scrollButtons:"off","aria-label":"full width tabs example",children:[le?(0,r.jsx)(b.Z,Z({label:"Users"},P(0))):"",(0,r.jsx)(b.Z,Z({label:"Coversations"},P(1))),le?(0,r.jsx)(b.Z,Z({label:"Chat History"},P(2))):""]})}),(0,r.jsxs)(g.ZP,{axis:"rtl"===de.direction?"x-reverse":"x",index:he,onChangeIndex:function(e){xe(e)},children:[le?(0,r.jsx)(A,{value:he,index:0,dir:de.direction,children:(0,r.jsxs)("div",{className:"tab_history",children:[(0,r.jsx)("div",{className:"combain_style",children:(0,r.jsxs)("div",{className:"searchbar_style",children:[(0,r.jsx)("input",{type:"text",className:"search_input_style",placeholder:"Search...",onChange:function(e){return X(e.target.value)},onKeyUp:Ne}),(0,r.jsx)("div",{className:"search_icon_style",children:(0,r.jsx)(f.Z,{})})]})}),(0,r.jsx)("div",{className:"peoplesall",children:R.length>0&&(0,r.jsx)(r.Fragment,{children:R.map((function(e,n){return(0,r.jsxs)("div",{onClick:function(){return we(n,e)},className:"singlepeople ".concat(n===V?"selected":""," "),children:[e.onlinestatus?(0,r.jsx)("span",{className:"onlineicons",children:(0,r.jsx)(h.Z,{})}):(0,r.jsx)("span",{className:"offlineicons",children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)("div",{className:" singlepeopleimg",children:(0,r.jsx)("img",{src:e.image,width:"20px",height:"20px"})}),(0,r.jsxs)("div",{className:"membernames",children:[(0,r.jsx)("h5",{className:"membernamestxt",children:e.fullname}),(0,r.jsx)("p",{className:"memberposition",children:e.username})]})]},e._id)}))})})]})}):"",(0,r.jsx)(A,{value:he,index:1,dir:de.direction,children:(0,r.jsxs)("div",{className:"tab_history",children:[(0,r.jsx)("div",{className:"combain_style",children:(0,r.jsxs)("div",{className:"searchbar_style",children:[(0,r.jsx)("input",{type:"text",className:"search_input_style",placeholder:"Search...",onChange:function(e){return ee(e.target.value)},onKeyUp:be}),(0,r.jsx)("div",{className:"search_icon_style",children:(0,r.jsx)(f.Z,{})})]})}),(0,r.jsx)("div",{className:"peoplesall",children:S.length>0&&(0,r.jsx)(r.Fragment,{children:S.map((function(e,n){return(0,r.jsxs)("div",{onClick:function(){return we(n,e)},className:"singlepeople ".concat(n===V?"selected":""," "),children:[e.onlinestatus?(0,r.jsx)("span",{className:"onlineicons",children:(0,r.jsx)(h.Z,{})}):(0,r.jsx)("span",{className:"offlineicons",children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)("div",{className:" singlepeopleimg",children:(0,r.jsx)("img",{src:e.image,width:"20px",height:"20px"})}),(0,r.jsxs)("div",{className:"membernames",children:[(0,r.jsx)("h5",{className:"membernamestxt",children:e.fullname}),(0,r.jsx)("p",{className:"memberposition",children:e.username})]}),0===L[n]?"":(0,r.jsx)("div",{className:"notification",children:(0,r.jsx)("p",{className:"notifynumber",children:L[n]})})]},e._id)}))})})]})}),le?(0,r.jsx)(A,{value:he,index:2,dir:de.direction,children:(0,r.jsxs)("div",{className:"tab_history",children:[(0,r.jsx)("div",{className:"combain_style",children:(0,r.jsxs)("div",{className:"searchbar_style",children:[(0,r.jsx)("input",{type:"text",className:"search_input_style",placeholder:"Search Username...",onChange:function(e){return ee(e.target.value)},onKeyUp:ke}),(0,r.jsx)("div",{className:"search_icon_style",children:(0,r.jsx)(f.Z,{})})]})}),se.length>0?"":(0,r.jsx)("div",{className:"peoplesall",children:pe.length>0&&(0,r.jsx)(r.Fragment,{children:pe.map((function(e,n){return(0,r.jsxs)("div",{onClick:function(){return n=e._id,console.log(n),void ce(n);var n},className:"singlepeople ".concat(n===V?"selected":""," "),children:[(0,r.jsx)("div",{className:" singlepeopleimg",children:(0,r.jsx)("img",{src:e.image,width:"20px",height:"20px"})}),(0,r.jsxs)("div",{className:"membernames",children:[(0,r.jsx)("h5",{className:"membernamestxt",children:e.fullname}),(0,r.jsx)("p",{className:"memberposition",children:e.username})]}),0===L[n]?"":(0,r.jsx)("div",{className:"notification",children:(0,r.jsx)("p",{className:"notifynumber",children:L[n]})})]},e._id)}))})}),(0,r.jsx)("div",{className:"peoplesall",children:se.length>0&&(0,r.jsx)(r.Fragment,{children:se.map((function(e,n){return(0,r.jsxs)("div",{onClick:function(){return we(n,e)},className:"singlepeople ".concat(n===V?"selected":""," "),children:[(0,r.jsx)("div",{className:" singlepeopleimg",children:(0,r.jsx)("img",{src:e.image,width:"20px",height:"20px"})}),(0,r.jsxs)("div",{className:"membernames",children:[(0,r.jsx)("h5",{className:"membernamestxt",children:e.fullname}),(0,r.jsx)("p",{className:"memberposition",children:e.username})]}),0===L[n]?"":(0,r.jsx)("div",{className:"notification",children:(0,r.jsx)("p",{className:"notifynumber",children:L[n]})})]},e._id)}))})})]})}):""]})]})]}),le?"":(0,r.jsx)("div",{className:"peoplesall",children:S.length>0&&(0,r.jsx)(r.Fragment,{children:S.map((function(e,n){return(0,r.jsxs)("div",{onClick:function(){return we(n,e)},className:"singlepeople ".concat(n===V?"selected":""," "),children:[e.onlinestatus?(0,r.jsx)("span",{className:"onlineicons",children:(0,r.jsx)(h.Z,{})}):(0,r.jsx)("span",{className:"offlineicons",children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)("div",{className:" singlepeopleimg",children:(0,r.jsx)("img",{src:e.image,width:"20px",height:"20px"})}),(0,r.jsxs)("div",{className:"membernames",children:[(0,r.jsx)("h5",{className:"membernamestxt",children:e.fullname}),(0,r.jsx)("p",{className:"memberposition",children:e.username})]}),0===L[n]?"":(0,r.jsx)("div",{className:"notification",children:(0,r.jsx)("p",{className:"notifynumber",children:L[n]})})]},e._id)}))})})]})})},F=t(2684),B=t(60482),J=t(82864),V=t(40055),$=t(29911),U="http://178.62.228.242:5000",R="".concat(U,"/api/chat/addmsg"),G="".concat(U,"/api/chat/getmsg"),K="".concat(U,"/api/chat/addmychat"),M=t(25934),q=t(96540),L=t(41733),z=t(26307),H=JSON.parse('{"v":"5.5.2","fr":60,"ip":0,"op":104,"w":84,"h":40,"nm":"Typing-Indicator","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Oval 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.643],"y":[1]},"o":{"x":[1],"y":[0]},"t":18,"s":[35],"e":[100]},{"i":{"x":[0.099],"y":[1]},"o":{"x":[0.129],"y":[0]},"t":33,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":65,"s":[35],"e":[35]},{"t":71}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[61,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":18,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.032,0.032,0.667],"y":[1,1,1]},"o":{"x":[0.217,0.217,0.333],"y":[0,0,0]},"t":33,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":65,"s":[100,100,100],"e":[100,100,100]},{"t":71}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Oval 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":9,"s":[35],"e":[98]},{"i":{"x":[0.023],"y":[1]},"o":{"x":[0.179],"y":[0]},"t":24,"s":[98],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":56,"s":[35],"e":[35]},{"t":62}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[41,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.654,0.654,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":9,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.11,0.11,0.667],"y":[1,1,1]},"o":{"x":[0.205,0.205,0.333],"y":[0,0,0]},"t":24,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":56,"s":[100,100,100],"e":[100,100,100]},{"t":62}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Oval 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[35],"e":[100]},{"i":{"x":[0.067],"y":[1]},"o":{"x":[0.125],"y":[0]},"t":15,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":47,"s":[35],"e":[35]},{"t":53}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[21,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.673,0.673,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.049,0.049,0.667],"y":[1,1,1]},"o":{"x":[0.198,0.198,0.333],"y":[0,0,0]},"t":15,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":47,"s":[100,100,100],"e":[100,100,100]},{"t":53}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[42,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-42,-20],[42,-20],[42,20],[-42,20]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"rd","nm":"Round Corners 1","r":{"a":0,"k":20,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.96078401804,0.96078401804,0.96078401804,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"BG","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0}],"markers":[]}'),W=t(9669),X=t.n(W),Y=t(79464);function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function ee(e,n,t,s,a,r,i){try{var c=e[r](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(s,a)}function ne(e){return function(){var n=this,t=arguments;return new Promise((function(s,a){var r=e.apply(n,t);function i(e){ee(r,s,a,i,c,"next",e)}function c(e){ee(r,s,a,i,c,"throw",e)}i(void 0)}))}}function te(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var se=function(e){var n=e.currentChat,t=e.socket,s=(e.changeChat,"http://178.62.228.242:5000/"),o=(0,i.useContext)(w.Z),l=(o.setcheckfalse,o.checkfalse),u=o.setnotify,d=(o.notify,o.setchatback),m=o.setrightchatback;console.log(l),console.log(n);var x=(0,i.useRef)(null),f=(0,i.useState)(""),p=f[0],v=f[1],g=(0,i.useState)([]),j=g[0],y=g[1],N=(0,i.useState)(!1),b=N[0],k=N[1],S=(0,i.useState)(!1),_=S[0],O=S[1],E=(0,i.useState)(!1),C=E[0],Z=E[1],D=(0,i.useState)(null),I=D[0],A=D[1],P=(0,i.useState)(!1),T=P[0],U=P[1],W=(0,i.useState)(0),Q=W[0],ee=W[1],se=(0,i.useState)([]),ae=(se[0],se[1],(0,i.useState)([])),re=(ae[0],ae[1],(0,i.useState)([])),ie=re[0],ce=re[1],oe=(0,i.useState)(!1),le=oe[0],ue=oe[1],de=(0,i.useState)([]),me=de[0],he=(de[1],(0,i.useState)("")),xe=he[0],fe=he[1],pe=(0,i.useState)(""),ve=pe[0],ge=pe[1],je={loop:!0,autoplay:!0,animationData:H,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},ye=function(){var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(ne(a().mark((function e(){var t,s,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user"),s=null!==t?JSON.parse(t):[],r=s.tokenData.id,e.next=5,X().post(G,{from:r,to:n._id});case 5:i=e.sent,console.log(i.data),y(i.data),fe(r),ye();case 10:case"end":return e.stop()}}),e)}))),[n]),console.log(j),(0,i.useEffect)((function(){var e=localStorage.getItem("user"),s=(null!==e?JSON.parse(e):[]).tokenData.id;t.current=(0,c.ZP)("http://178.62.228.242:5000/"),t.current.emit("add-user",s),t.current.on("connected",(function(){return Z(!0)})),t.current.emit("join chat",n._id),t.current.on("typing",(function(){return O(!0)})),t.current.on("stop typing",(function(){return O(!1)})),ye()}),[]),(0,i.useEffect)((function(){var e=function(){var e=ne(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,JSON.parse(localStorage.getItem("user")).id;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),ye()}),[n]);var Ne=function(){var e=ne(a().mark((function e(s){var r,i,c,o,l,u,d,m,h,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("hi"),console.log(s),console.log(s.length),0!==ie.length){e.next=26;break}if(!(s.length>0)){e.next=24;break}for(t.current.emit("send-msg",{to:n._id,from:xe,text:s}),t.current.emit("stop typing",xe),{from:xe,to:n._id,message:s},r=new FormData,i=0;i<ie.length;i++)r.append("chatimage",ie[i]);return r.append("from",xe),r.append("to",n._id),r.append("message",s),e.next=15,X()({method:"post",url:R,data:r,headers:{"Content-Type":"multipart/form-data"}});case 15:return e.sent,e.next=18,X().post(K,{headers:{"Content-Type":"application/json",Authorization:"JWT fefege..."},from:xe,to:n._id});case 18:(c=te(j)).push({fromSelf:!0,message:s}),y(c),ye(),ce([]),ue(!1);case 24:e.next=53;break;case 26:for(console.log(s),t.current.emit("send-msg",{to:n._id,from:xe}),t.current.emit("stop typing",xe),{from:xe,to:n._id},o=new FormData,l=0;l<ie.length;l++)o.append("chatimage",ie[l]);return o.append("from",xe),o.append("to",n._id),o.append("message",s),e.next=37,X()({method:"post",url:R,data:o,headers:{"Content-Type":"multipart/form-data"}});case 37:return e.sent,e.next=40,X().post(K,{headers:{"Content-Type":"application/json",Authorization:"JWT fefege..."},from:xe,to:n._id});case 40:return(u=te(j)).push({fromSelf:!0,message:s}),y(u),ye(),ce([]),ue(!1),d=localStorage.getItem("user"),m=null!==d?JSON.parse(d):[],h=m.tokenData.id,e.next=51,X().post(G,{from:h,to:n._id});case 51:x=e.sent,y(x.data);case 53:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){t.current.on("msg-recieve",(function(e,n,t){console.log("hii"),fetch("http://178.62.228.242:5000/api/chat/chatnotification/".concat(n)).then((function(e){return e.json()})).then((function(e){console.log(e),u(e)})),A({fromSelf:!1,message:e}),ye()}))}),[]),(0,i.useEffect)((function(){I&&y((function(e){return te(e).concat([I])})),ye()}),[I]);var be=function(){var e=ne(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("user"),t=null!==n?JSON.parse(n):[],r=t.tokenData.id,e.next=5,fetch(s+"api/edituser/"+r);case 5:return i=e.sent,e.next=8,i.json();case 8:i=e.sent,ge(i.result.image);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){be()}),[]);var ke=function(){return(0,r.jsxs)("div",{className:"uploadimgbox",children:[(0,r.jsx)("div",{className:"innerimgbox",children:_e?(0,r.jsx)("img",{src:_e,alt:"jj",width:100,height:100}):(0,r.jsx)("img",{src:ie||null,alt:"ss"})}),(0,r.jsx)("div",{className:"deletebox",children:(0,r.jsx)("div",{className:"deletsvg",onClick:Ee,children:(0,r.jsx)(L.Z,{})})})]})};console.log(p);var Se=(0,i.useState)({src:"",alt:"Upload an Image"}),we=Se[0],_e=(we.alt,we.src),Oe=Se[1],Ee=function(){ue(!1)};console.log(me);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"centerchat ".concat(T?"active":""),children:[(0,r.jsx)("div",{className:"navbars",style:{display:"none"},children:(0,r.jsx)($.default,{notify:me})}),(0,r.jsxs)("div",{className:"centerinnerchat",children:[(0,r.jsx)("div",{className:"centerhead",children:(0,r.jsxs)("div",{className:"introduction",children:[(0,r.jsx)("div",{className:"backicon",children:(0,r.jsx)(J.Z,{onClick:function(){U(!0),d(!0)}})}),(0,r.jsxs)("div",{className:"introtitle",children:[(0,r.jsxs)("div",{className:"allnamess",children:[(0,r.jsx)("h3",{className:"titleintro",children:n.fullname}),(0,r.jsxs)("span",{className:"currentusername",children:["(",n.username,")"]})]}),n.onlinestatus?(0,r.jsxs)("div",{className:"alldesccheck",children:[(0,r.jsx)("span",{className:"onlineicons",children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)("span",{className:"introdesc",children:"Online"})]}):(0,r.jsxs)("div",{className:"alldesccheck",children:[(0,r.jsx)("span",{className:"offlineicons",children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)("span",{className:"introdesc",children:"Offline"})]})]}),(0,r.jsx)("div",{className:"introicons",onClick:function(){m(!0)},children:(0,r.jsx)(F.Z,{})})]})}),(0,r.jsx)("hr",{className:"break"}),(0,r.jsx)("div",{className:"chatsmessage",children:(0,r.jsxs)("div",{className:"cahtmsginner",children:[j.map((function(e,t){return(0,r.jsxs)("div",{ref:x,children:[e.message?(0,r.jsx)("div",{className:"".concat(e.fromSelf?"meassagebox1":"meassagebox"),children:(0,r.jsxs)("div",{className:"msginner",children:[(0,r.jsx)("div",{className:"msgnamesicon ".concat(e.fromSelf?" active":"msgnamesicon"),children:(0,r.jsx)("span",{className:"iconname ".concat(e.fromSelf?" active":"iconname"),children:(0,r.jsx)("img",{src:n.image})})}),(0,r.jsxs)("div",{className:"msgdetails",children:[(0,r.jsx)("div",{className:"msgnames",children:(0,r.jsx)("h5",{className:"namesinner",children:(e.fromSelf,"")})}),(0,r.jsxs)("div",{className:"msgboxes",children:[(0,r.jsx)("div",{className:"msgbox tri-right left-in",children:(0,r.jsx)("div",{className:"msgboxinner",children:(0,r.jsx)("p",{className:"msgtext",children:e.message})})}),e.fromSelf?(0,r.jsx)("div",{className:"tickicon",children:(0,r.jsx)(V.default,{})}):""]})]}),(0,r.jsx)("div",{className:"msgnamesicon ".concat(e.fromSelf?" msgnamesicon":"active"),children:(0,r.jsx)("span",{className:"iconname ".concat(e.fromSelf?" iconname":"active"),children:(0,r.jsx)("img",{src:ve,alt:"notfound"})})})]})}):"",e.messages?(0,r.jsx)("div",{className:"meassagebox1",children:e.messages.map((function(e){return(0,r.jsx)("img",{src:e,style:{width:"100px",height:"100px"}})}))}):""]},(0,M.Z)())})),console.log(_),_?(0,r.jsx)("div",{className:"istyping",children:(0,r.jsx)("div",{className:"istypinginner",style:{width:"35px",height:"50px",marginLeft:"3rem"},children:(0,r.jsx)(Y.Z,{options:je,height:20,width:50})})}):""]})}),(0,r.jsx)("div",{className:"textbox",children:(0,r.jsxs)("div",{className:"innertextbox",children:[(0,r.jsx)("div",{className:"uploadimageshow ".concat(le?"active":""),children:(0,r.jsx)("div",{className:"uploadimginner",children:te(Array(Q)).map((function(e,n){return(0,r.jsx)(ke,{},n)}))})}),(0,r.jsxs)("div",{className:"inputtextbox",children:[(0,r.jsx)("div",{className:"uploadbtnss",children:(0,r.jsxs)("label",{className:"customupload",children:[(0,r.jsx)(q.Z,{}),(0,r.jsx)("input",{type:"file",onChange:function(e){e.preventDefault(),ee(Q+1);for(var n=[],t=0;t<e.target.files.length;t++){ue(!0),Oe({alt:e.target.files[0].name,src:URL.createObjectURL(e.target.files[0])});var s=e.target.files;n.push(s[t]),console.log(n),ce(s)}},multiple:!0})]})}),(0,r.jsx)(B.Z,{value:p,onKeyDown:function(e){if(C){b||(k(!0),t.current.emit("typing",xe));var n=(new Date).getTime();setTimeout((function(){(new Date).getTime()-n>=3e3&&b&&(t.current.emit("stop typing",xe),k(!1))}),3e3),console.log(_)}},onChange:function(e){return v(e.target)},cleanOnEnter:!0,onEnter:Ne,placeholder:"Type a message"}),(0,r.jsx)("div",{className:"sendbtn",onClick:function(){},children:(0,r.jsx)(z.Z,{})})]})]})})]})]})})},ae=t(83419);function re(e,n,t,s,a,r,i){try{var c=e[r](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(s,a)}var ie=function(e){e.changeChat,e.socket;var n="http://178.62.228.242:5000/",t=(0,i.useContext)(w.Z),s=t.rightchatback,c=t.setrightchatback;console.log(s);var o=(0,x.useRouter)(),l=(0,i.useState)(""),u=l[0],d=l[1],m=(0,i.useState)(""),f=m[0],p=m[1],v=(0,i.useState)(""),g=v[0],j=v[1],y=(0,i.useState)(void 0),N=(y[0],y[1],function(){var e,t=(e=a().mark((function e(){var t,s,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("user"))){e.next=16;break}return s=null!==t?JSON.parse(t):[],r=s.tokenData.id,e.next=6,fetch(n+"api/edituser/"+r);case 6:return i=e.sent,e.next=9,i.json();case 9:i=e.sent,console.log(i),j(i.result.image),p(i.result.fullname),d(i.result.username),e.next=17;break;case 16:o.push("/chat/login");case 17:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(s,a){var r=e.apply(n,t);function i(e){re(r,s,a,i,c,"next",e)}function c(e){re(r,s,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}());(0,i.useEffect)((function(){N()}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"rightchat ".concat(s?"active":""),children:(0,r.jsxs)("div",{className:"rightchathead",children:[(0,r.jsx)("div",{className:"leftchathead",children:(0,r.jsxs)("div",{className:"leftchatheadinner",children:[(0,r.jsx)("div",{className:"userimg",children:(0,r.jsx)("img",{src:g})}),(0,r.jsxs)("div",{className:"userdetailsinfo",children:[(0,r.jsx)("div",{className:"usernameinfo",children:(0,r.jsx)("h2",{className:"infonames",children:f})}),(0,r.jsxs)("div",{className:"usernickname",children:[(0,r.jsx)("span",{className:"nicksname",children:u}),(0,r.jsx)("div",{className:"dotimg",children:(0,r.jsx)(h.Z,{})})]})]}),(0,r.jsx)("div",{className:"rightchatclose",onClick:function(){c(!1)},children:(0,r.jsx)(ae.Z,{})})]})}),(0,r.jsx)("div",{className:"members"})]})})})},ce=function(){var e=(0,i.useContext)(w.Z).setchatback;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"welcomepage",children:[(0,r.jsx)("div",{className:"backmsg",onClick:function(){console.log("hii"),e(!0)},children:(0,r.jsx)(J.Z,{})}),(0,r.jsx)("div",{className:"welcomeimg",children:(0,r.jsx)(u(),{src:o.Z})}),(0,r.jsxs)("div",{className:"welcometitle",children:[(0,r.jsx)("h3",{className:"titleinnerwelcome",children:"Esports4g.com does not promote offsite trading. Do not accept invitations from users who offer trading outside Esports4g.com."}),(0,r.jsx)("p",{className:"welcomepara",children:"Trading outside the Esports4g platform will not be tolerable and cannot be entertained at any cost. Our team will only help those users who trade within Esports4g.com in any fraudulent case, product issue, description issue. If found, will ban any user trading outside the Esports4g platform immediately."}),(0,r.jsx)("span",{className:"welcomespan",children:"Contact us if you found any seller who offers you offsite trading."})]})]})})};function oe(e,n,t,s,a,r,i){try{var c=e[r](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(s,a)}function le(e){return function(){var n=this,t=arguments;return new Promise((function(s,a){var r=e.apply(n,t);function i(e){oe(r,s,a,i,c,"next",e)}function c(e){oe(r,s,a,i,c,"throw",e)}i(void 0)}))}}function ue(){var e=(0,x.useRouter)(),n=(0,i.useRef)(),t=(0,i.useState)(void 0),s=t[0],a=t[1],o=(0,i.useState)(void 0),l=o[0],u=o[1],d=(0,i.useState)(""),m=(d[0],d[1]),h=(0,i.useState)(!1),f=h[0],p=h[1],v=(0,i.useState)([]);v[0],v[1];(0,i.useEffect)((function(){var n=localStorage.getItem("user");if(n){var t=(null!==n?JSON.parse(n):[]).tokenData.id;u(t)}else p(!0),e.push("/chat/login")}),[]),(0,i.useEffect)((function(){var t=localStorage.getItem("user");if(t){var s=null!==t?JSON.parse(t):[],a=s.tokenData.id,r=s.tokenData.username;m(r),a&&(n.current=(0,c.io)("http://178.62.228.242:5000/"),n.current.emit("add-user",a))}else p(!0),e.push("/chat/login")}),[l]);return(0,r.jsx)(r.Fragment,{children:f?(0,r.jsx)("div",{className:"outerloading",children:(0,r.jsx)("div",{class:"loader"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"navbars",style:{display:"none"},children:(0,r.jsx)($.default,{socket:n,changeChat:s})}),(0,r.jsx)("div",{className:"chatcontainer",children:(0,r.jsxs)("div",{className:"chatinnercontainer",children:[(0,r.jsx)(T,{changeChat:function(e){a(e)},socket:n}),void 0===s?(0,r.jsx)(ce,{}):(0,r.jsx)(se,{currentChat:s,socket:n}),(0,r.jsx)(ie,{})]})})]})})}function de(e){return me.apply(this,arguments)}function me(){return(me=le(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.req,n.res.setHeader("Cache-Control","public, s-maxage=10, stale-while-revalidate=59"),e.abrupt("return",{props:{}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}},function(e){e.O(0,[417,296,2607,6572,7668,1652,9774,2888,179],(function(){return n=90813,e(e.s=n);var n}));var n=e.O();_N_E=n}]);