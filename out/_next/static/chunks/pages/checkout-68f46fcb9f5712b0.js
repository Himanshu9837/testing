(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{72590:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return n(49949)}])},4523:function(e,t){"use strict";t.Z={src:"/_next/static/media/bankwallet.f598d537.webp",height:256,width:256,blurDataURL:"data:image/webp;base64,UklGRrwAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAAACSQlJCQkJhlU//b4+Pf+1aX//v/////k6P/9/v79/+Dd//v9/fv/4ur///////+Or9jR0tLR2kMABQQEBAQDAABWUDggVAAAADACAJ0BKggACAACQDglsAJ0ugACusrX10xAAP7PfxgrKrYIPtxy08RS7D+iUiUHJdcl+uGzXDH3gHiUyaff3CBB9sQJr1Bg393/ws2b2fTGrTEAAA=="}},49949:function(e,t,n){"use strict";n.r(t),n.d(t,{config:function(){return I},default:function(){return _},getInitialProps:function(){return k}});var r=n(34051),a=n.n(r),s=n(85893),c=n(25675),o=n.n(c),i=(n(81643),n(34193),{src:"/_next/static/media/visa.aee4af2f.svg",height:259,width:800}),l=n(4523),u={src:"/_next/static/media/braintree_paypal (1).871b04b7.svg",height:10,width:37},d=n(8364),h=n(29911),p=n(41664),f=n.n(p),m=n(50594),x=n(67294),v=n(75021),y=n(11163),j=n(22903);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,s,c){try{var o=e[s](c),i=o.value}catch(l){return void n(l)}o.done?t(i):Promise.resolve(i).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function c(e){g(s,r,a,c,o,"next",e)}function o(e){g(s,r,a,c,o,"throw",e)}c(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);c=!0);}catch(i){o=!0,a=i}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=(0,n(59813).default)(),A=w.props.children[0],I={unstable_runtimeJS:!1};function _(){var e=function(){if(null!=localStorage.getItem("user")){var e=localStorage.getItem("user"),n=(null!==e?JSON.parse(e):[]).tokenData.id;fetch("".concat(t,"api/cart/cartinfo/").concat(n)).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.map((function(e){return b(e.totalquantity)}));console.log(t)}))}else Ue.push("/login")},t="http://178.62.228.242:5000/";console.log(A);var n=(0,x.useContext)(j.Z),r=n.checkcurrencyslocal,c=n.currencys,p=n.currencyslocal,b=n.setcartnmber,g=(0,x.useState)(!1),I=g[0],_=g[1],k=(0,x.useState)(!1),C=k[0],P=k[1];console.log(w);var O=(0,x.useState)(!1),T=O[0],E=O[1],D=(0,x.useState)(!1),J=D[0],U=D[1],M=(0,x.useState)([]),q=M[0],L=M[1],B=S(x.useState(0),2),Q=(B[0],B[1],S(x.useState(!0),2)),R=Q[0],V=Q[1],X=S(x.useState(!0),2),F=(X[0],X[1],(0,x.useState)([])),W=(F[0],F[1],(0,x.useState)()),Z=W[0],G=W[1],H=(0,x.useState)(),Y=H[0],K=H[1],z=(0,x.useState)(),$=z[0],ee=z[1],te=(0,x.useState)(""),ne=te[0],re=(te[1],(0,x.useState)()),ae=(re[0],re[1],(0,x.useState)([])),se=ae[0],ce=ae[1],oe=(0,x.useState)(!1),ie=(oe[0],oe[1]),le=(0,x.useState)(!0),ue=le[0],de=le[1],he=(0,x.useState)(!0),pe=he[0],fe=he[1],me=(0,x.useState)(""),xe=me[0],ve=(me[1],(0,x.useState)("")),ye=ve[0],je=(ve[1],(0,x.useState)()),be=je[0],ge=je[1],Ne=(0,x.useState)(),Se=Ne[0],we=Ne[1],Ae=(0,x.useState)(),Ie=Ae[0],_e=Ae[1],ke=(0,x.useState)(!1),Ce=ke[0],Pe=ke[1],Oe=(0,x.useState)([]),Te=(Oe[0],Oe[1]),Ee=(0,x.useState)(!1),De=Ee[0],Je=Ee[1];console.log(be);var Ue=(0,y.useRouter)(),Me=[];fetch("".concat(t,"api/cart/cartinfo/").concat(A)).then((function(e){e.json().then((function(e){var t=e[0],n=t.subTotal;K(n),Ge();var r=t.items,a=!0,s=!1,c=void 0;try{for(var o,i=r[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,u=l.quantity,d=l.productId;Me.push({productId:d._id,selerId:d.sellerId,quantity:u})}}catch(h){s=!0,c=h}finally{try{a||null==i.return||i.return()}finally{if(s)throw c}}}))})),console.log(Me);var qe=function(){E(!1),U(!1),console.log(I),Pe(!1),P(!0),V(!1),_(!1)},Le=function(){console.log(I),E(!0),U(!0),ie(!0),setTimeout((function(){ie(!1)}),1e3)},Be=function(){var e=[],n=!0,r=!1,a=void 0;try{for(var s,o=q[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value.items,l=!0,u=!1,d=void 0;try{for(var h,p=i[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var f=h.value,m=f.quantity,x=f.productId;console.log(x),e.push({productId:x._id,selerId:x.sellerId,quantity:m})}}catch(j){u=!0,d=j}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}}}catch(j){r=!0,a=j}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}if(e.length>0){var v=Math.random(),y={products:e,transactionId:v,userId:Z,wallet:!0,subtotal:Y,currencyrate:c};fetch("".concat(t,"api/order/walletorderdercreate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(e){console.log(e.status),alert("hii"),200===e.status?Ue.push("/checkout/payment/".concat(v)):(Je(!0),setTimeout((function(){Je(!1),fe(!1)}),2e3))}))}};(0,x.useEffect)(N(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=localStorage.getItem("user"))?(n=null!==t?JSON.parse(t):[],r=n.tokenData.id,Re(A),ee(r),Qe(),Xe()):Ue.push("/login");case 2:case"end":return e.stop()}}),e)}))),[xe,ye,Ie,be]);var Qe=function(){fetch(t+"api/withdrawal_wallet/enablepaymentmethode").then((function(e){return e.json()})).then((function(e){console.log(e),Te(e)}))},Re=function(){var e=N(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"api/cart/cartinfo/").concat(n)).then((function(e){return e.json()})).then((function(e){L(e),console.log(e[0].subTotal),_e(e[0].subTotal)}));case 2:G(n),console.log(Ie),Ge();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){Pe(!0),_(!0),V(!1),P(!1)},Xe=function(){var e=N(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+"api/withdrawal_wallet/enablepaymentmethode");case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,n.map((function(e){return e.paymentgateway})),ce(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var n=N(a().mark((function n(r,s,c,o){var i,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((i=c+1)<=o)){n.next=7;break}return l={cartId:s,quantity:i},n.next=5,fetch("".concat(t,"api/cart/updatecart/").concat(r),{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.error("Error:",e)}));case 5:n.next=8;break;case 7:i=c;case 8:Re($),Ge(),setTimeout((function(){e()}),500);case 11:case"end":return n.stop()}}),n)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),We=function(){var n=N(a().mark((function n(r,s,c){var o,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((o=c-1)<=0)){n.next=5;break}o=1,n.next=8;break;case 5:return i={cartId:s,quantity:o},n.next=8,fetch("".concat(t,"api/cart/updatecart/").concat(r),{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.error("Error:",e)}));case 8:Re($),setTimeout((function(){e()}),500);case 10:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),Ze=function(){var n=N(a().mark((function n(r,s){var c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={cartId:s},n.next=3,fetch("".concat(t,"api/cart/deletecart/").concat(r),{method:"Delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.error("Error:",e)}));case 3:de(!0),Re($),setTimeout((function(){e()}),500);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),Ge=function(){console.log(Ie);var e={paymethod:"paypal",price:Ie};fetch(t+"api/withdrawal_wallet/paymentfee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){ge(e.result),we(e.servicefee)})).catch((function(e){console.error(e)}))};console.log($);var He=function(){de(!0)},Ye=function(){de(!1)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"conatiners",children:[q.map((function(e){return(0,s.jsx)("div",{class:"outerdeletepopup ".concat(ue?"active":""),children:e.items.map((function(t){return(0,s.jsxs)("div",{class:"deletepopus",children:[(0,s.jsxs)("div",{class:"innerdeletepopup",children:[(0,s.jsx)("div",{class:"icon-box",onClick:He,children:(0,s.jsx)(m.default,{})}),(0,s.jsx)("h4",{class:"deletetitles",children:"Are you sure?"})]}),(0,s.jsx)("div",{class:"deleteparas",children:(0,s.jsx)("p",{children:"Do you really want to delete these Item? "})}),(0,s.jsx)("button",{type:"button",class:"btn btn-secondary",onClick:He,children:"Cancel"}),(0,s.jsx)("button",{type:"button",class:"btn btn-danger",onClick:function(){Ze(t._id,e._id)},children:"Delete"})]})}))})})),(0,s.jsx)("div",{class:"outerdeletepopupW ".concat(pe?"active":""),children:(0,s.jsxs)("div",{class:"deletepopus",children:[(0,s.jsxs)("div",{class:"innerdeletepopup",children:[(0,s.jsx)("div",{class:"icon-boxs",onClick:function(){fe(!0)},children:(0,s.jsx)(m.default,{})}),(0,s.jsx)("h4",{class:"deletetitless",children:"Insufficient balence"})]}),(0,s.jsx)("div",{class:"deleteparas",children:(0,s.jsx)("p",{children:"You have Insufficient balence in your wallet please recharge it."})}),(0,s.jsx)("div",{children:(0,s.jsx)(f(),{href:"dashboard/wallet",children:(0,s.jsx)("button",{type:"button",class:"btn btn-danger",children:"Add Balance"})})})]})}),(0,s.jsx)(h.default,{}),q.map((function(e){return e.items.length>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"banner",children:[console.log(Me),(0,s.jsxs)("div",{className:"inner",children:[(0,s.jsx)("div",{className:"checkout",children:(0,s.jsxs)("div",{className:"checkout_box",children:[(0,s.jsx)("div",{className:"allproducts",children:e.items.map((function(t){return(0,s.jsxs)("div",{className:"allboxes",children:[(0,s.jsx)("span",{className:"title",children:"Sold By"}),(0,s.jsxs)("div",{className:"box2",children:[(0,s.jsxs)("div",{className:"box1",children:[(0,s.jsx)("div",{className:"userpic",children:(0,s.jsx)("img",{src:t.sellerId.image,alt:"notfound"})}),(0,s.jsx)("p",{children:t.sellerId.username})]}),(0,s.jsx)("div",{className:"products",children:(0,s.jsx)("img",{src:t.productId.images[0],alt:"notfound"})}),(0,s.jsx)("h3",{className:"product_title",children:t.productId.productname}),(0,s.jsx)("div",{className:"deletebtn",onClick:Ye,children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)("p",{className:"detail",children:"Digital product"})]}),(0,s.jsxs)("div",{className:"box3",children:[(0,s.jsxs)("div",{className:"inner_box-3",children:[(0,s.jsx)("button",{type:"button",className:"addcart",onClick:function(){We(t.productId._id,e._id,t.quantity)},children:"-"}),t.quantity,(0,s.jsx)("button",{type:"button",className:"addcart",onClick:function(){Fe(t.productId._id,e._id,t.quantity,t.productId.stock)},children:t.quantity>=t.productId.stock?"":"+"})]}),r?(0,s.jsxs)("p",{className:"currency",children:[Math.round(100*(t.productId.price*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:p})]}):(0,s.jsxs)("p",{className:"currency",children:[Math.round(100*(t.productId.price*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:"USD"})]}),(0,s.jsx)("div",{className:"linebreak"})]})]})}))}),(0,s.jsxs)("ul",{className:"fees",children:[(0,s.jsxs)("li",{className:"fees_total1",children:["Sub-total",r?(0,s.jsxs)("strong",{id:"sub_total",children:[Math.round(100*(e.subTotal*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:p})]}):(0,s.jsxs)("strong",{id:"sub_total",children:[Math.round(100*(e.subTotal*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:"USD"})]})]}),Ce?(0,s.jsxs)("li",{className:"fees_total ".concat(I||C?"active":""),children:["Service fee",r?(0,s.jsxs)("strong",{children:[Math.round(100*(Se*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:p})]}):(0,s.jsxs)("strong",{children:[Math.round(100*(Se*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:"USD"})]})]}):"",(0,s.jsxs)("li",{className:"fees_total1 Total",children:["Grand Total:",Ce?(0,s.jsx)(s.Fragment,{children:r?(0,s.jsxs)("span",{id:"grand_total",children:[Math.round(100*(be*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:p})]}):(0,s.jsxs)("span",{id:"grand_total",children:[Math.round(100*(be*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:"USD"})]})}):(0,s.jsx)(s.Fragment,{children:r?(0,s.jsxs)("span",{id:"grand_total",children:[Math.round(100*(e.subTotal*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:p})]}):(0,s.jsxs)("span",{id:"grand_total",children:[Math.round(100*(e.subTotal*c+Number.EPSILON))/100,(0,s.jsx)("small",{children:"USD"})]})})]})]}),De?(0,s.jsx)("div",{className:"outerripple",children:(0,s.jsx)("div",{className:"ripples"})}):(0,s.jsx)("button",{className:"check_btn ".concat(I||C?"active":""),type:"button",onClick:I?Le:Be,style:{display:J?"none":"block"},disabled:R,children:"Continue"}),(0,s.jsx)("div",{className:"paypalpayment ".concat(T?"active":""),children:(0,s.jsxs)(v.Vv,{options:{"client-id":"AYhoBT2ssqlQgi-Vw6CWkZ8hqc5JJm9U13-9LbuRQ47ay2_IJpUhsrLjUmv7tiPg08OaspkVde1KNShq",currency:p},children:[console.log(p),void 0!=be?(0,s.jsx)(v.ch,{createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{value:parseInt(be*c)},item_list:{items:ne}}]})},onApprove:function(e,n){return n.order.capture().then((function(e){console.log(e),console.log(e.items);e.payer.name.given_name;if("COMPLETED"==e.status){var n={details:e,products:Me,transactionId:e.id,userId:Z,paymentfee:Se};fetch("".concat(t,"api/order/orderdercreate/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),"Order successfull created"==t.message&&Ue.push("/checkout/payment/".concat(e.id))}))}}))}}):""]})})]})}),(0,s.jsx)("ul",{className:"payment",children:se.map((function(e){return(0,s.jsxs)(s.Fragment,{children:["wallet"===e.paymentgateway&&(0,s.jsx)("li",{className:"cardpayment",children:(0,s.jsxs)("div",{className:"cardbtn1 ".concat(C?"active":""),onClick:qe,children:[(0,s.jsx)("span",{className:"radio1"}),(0,s.jsx)("span",{className:"card_name",children:"Wallet"}),(0,s.jsx)("p",{className:"description",children:"Pay with your wallet money"}),(0,s.jsx)("div",{className:"card_image",children:(0,s.jsx)("div",{className:"visa",children:(0,s.jsx)(o(),{src:l.Z})})})]})}),"INR"!=p&&"paypal"===e.paymentgateway&&(0,s.jsx)("li",{className:"cardpayment",children:(0,s.jsxs)("div",{className:"cardbtn ".concat(I?"active":""),onClick:Ve,children:[(0,s.jsx)("span",{className:"radio"}),(0,s.jsx)("span",{className:"card_name",children:"PayPal, Credit or debit card"}),(0,s.jsx)("p",{className:"description",children:"Pay via Visa, Mastercard, or Maestro debit or credit card"}),(0,s.jsxs)("div",{className:"card_image",children:[(0,s.jsx)("div",{className:"visa",children:(0,s.jsx)(o(),{src:i})}),(0,s.jsx)("div",{className:"paypalimg",children:(0,s.jsx)(o(),{src:u})})]})]})})]})}))})]})]})}):(0,s.jsxs)("div",{className:"emptycart",children:[(0,s.jsx)("h2",{className:"emptymsg",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"emptypara",children:"It seems you haven't chosen your products yet"}),(0,s.jsx)(f(),{href:"/",children:(0,s.jsx)("button",{className:"emptybtn",children:"Shop Now"})})]})}))]})})}function k(e){return C.apply(this,arguments)}function C(){return(C=N(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.req,t.res.setHeader("Cache-Control","public, s-maxage=10, stale-while-revalidate=59"),e.abrupt("return",{props:{}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59813:function(e,t,n){"use strict";n.r(t);var r=n(34051),a=n.n(r),s=n(85893);n(67294);function c(e,t,n,r,a,s,c){try{var o=e[s](c),i=o.value}catch(l){return void n(l)}o.done?t(i):Promise.resolve(i).then(r,a)}t.default=function(){var e=[],t=function(){var t,n=(t=a().mark((function t(){var n,r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=localStorage.getItem("user"))?(r=null!==n?JSON.parse(n):[],s=r.tokenData.id,e.push(s)):window.location="/login";case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function o(e){c(s,r,a,o,i,"next",e)}function i(e){c(s,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return t(),(0,s.jsx)("div",{className:"App",children:e})}}},function(e){e.O(0,[5021,1643,9774,2888,179],(function(){return t=72590,e(e.s=t);var t}));var t=e.O();_N_E=t}]);